{"version":3,"sources":["index.js"],"names":["Counter","props","className","onClick","handler","onTouchEnd","count","TimeInfo","name","millisToString","duration","TimeList","history","fastest_lap","arr","min_value","Number","MAX_SAFE_INTEGER","min_index","i","length","console","log","minIndex","map","v","cls","key","reverse","StartStop","is_running","text","days","Math","floor","hours","minutes","to","seconds","toFixed","result","App","handleStartStop","setState","state","handleClick","prev_event_time","now","Date","prev_time","current_time","start_time","new_time","concat","this","intervalID","setInterval","tick","clearInterval","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3c2ca6f8.chunk.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\n\nconst click_time_tol = 100;\n\nconst minIndex = (arr) => {\n  let min_value = Number.MAX_SAFE_INTEGER;\n  let min_index = -1;\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i] <= min_value) {\n      min_value = arr[i];\n      min_index = i;\n    }\n  }\n\n  console.log(\"minIndex => \", min_index, min_value);\n  return min_index;\n};\n\nfunction Counter(props) {\n  return (\n    <div\n      className=\"count-block\"\n      onClick={() => props.handler()}\n      onTouchEnd={() => props.handler()}\n    >\n      {props.count || \"GO\"}\n    </div>\n  );\n}\n\nfunction TimeInfo(props) {\n  return (\n    <div className=\"time-block\">\n      {props.name}: {millisToString(props.duration)}\n    </div>\n  );\n}\n\nfunction TimeList(props) {\n  const { history } = props;\n  const fastest_lap = minIndex(history);\n\n  return history\n    .map((v, i) => {\n      const cls = i === fastest_lap ? \"fastest-block\" : \"time-block\";\n\n      return (\n        <div className={cls} key={i}>\n          {i + 1} - {millisToString(v)}\n        </div>\n      );\n    })\n    .reverse();\n}\n\nfunction StartStop(props) {\n  const { handler, is_running } = props;\n  const [cls, text] = is_running\n    ? [\"fastest-block\", \"STOP\"]\n    : [\"info-block\", \"RESUME\"];\n\n  return (\n    <div className={cls} onClick={handler}>\n      {text}\n    </div>\n  );\n}\n\nconst millisToString = (duration) => {\n  const millis_t = 1;\n  const seconds_t = 1000 * millis_t;\n  const minutes_t = 60 * seconds_t;\n  const hours_t = 60 * minutes_t;\n  const days_t = 24 * hours_t;\n\n  const days = Math.floor(duration / days_t);\n  const hours = Math.floor((duration % days_t) / hours_t);\n  const minutes = Math.floor((duration % hours_t) / minutes_t).to;\n  const seconds = ((duration % minutes_t) / seconds_t).toFixed(3);\n\n  let result = `${minutes || 0}m ${seconds}s`;\n  result = hours ? `${hours}h ` + result : result;\n  result = days ? `${days}d ` + result : result;\n\n  return result;\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: null,\n      prev_time: null,\n      count: null,\n      current_time: Date.now(),\n      prev_event_time: Date.now(),\n      is_running: false,\n    };\n  }\n\n  componentDidMount() {\n    this.intervalID = setInterval(() => this.tick(), 100);\n  }\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  tick() {\n    const { is_running } = this.state;\n    if (is_running) {\n      this.setState({\n        ...this.state,\n        current_time: Date.now(),\n      });\n    }\n  }\n\n  handleStartStop = () => {\n    this.setState({\n      ...this.setState,\n      is_running: !this.state.is_running,\n    });\n  };\n\n  handleClick = () => {\n    const { prev_event_time } = this.state;\n    const now = Date.now();\n    const delta_time = now - prev_event_time;\n\n    if (delta_time < click_time_tol) {\n      return; // debounce double events like onTouchUp and onClick\n    }\n\n    if (this.state.count === null) {\n      // first click\n      this.setState({\n        ...this.state,\n        history: [],\n        count: 1,\n        prev_time: now,\n        prev_event_time: now,\n        current_time: now,\n        start_time: now,\n        is_running: true,\n      });\n    } else {\n      const new_time = now - this.state.prev_time;\n\n      this.setState({\n        ...this.state,\n        history: this.state.history.concat([new_time]), //[...history, squares],\n        count: this.state.count + 1,\n        prev_time: now,\n        prev_event_time: now,\n        current_time: now,\n      });\n    }\n  };\n\n  render() {\n    if (this.state.count === null) {\n      return (\n        <div onClick={this.handleClick}>\n          <div className=\"count-block\">{\"GO\"}</div>\n        </div>\n      );\n    }\n\n    const {\n      history,\n      start_time,\n      current_time,\n      prev_event_time,\n      is_running,\n    } = this.state;\n\n    return (\n      <div>\n        <Counter count={this.state.count} handler={this.handleClick} />\n        <TimeInfo name={\"CURRENT\"} duration={current_time - start_time} />\n        <TimeInfo name={\"TOTAL\"} duration={current_time - prev_event_time} />\n        <StartStop is_running={is_running} handler={this.handleStartStop} />\n        <TimeList history={history} />\n      </div>\n    );\n  }\n}\n\n// ========================================\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}