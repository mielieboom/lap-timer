{"version":3,"sources":["index.js"],"names":["millisToString","duration","days","Math","floor","hours","minutes","to","seconds","toFixed","result","App","props","handleClick","prev_event_time","state","now","Date","count","setState","history","prev_time","current_time","new_time","concat","this","intervalID","setInterval","tick","clearInterval","onClick","className","fastest_lap","arr","min_value","Number","MAX_SAFE_INTEGER","min_index","i","length","console","log","minIndex","fastest_text","fastest","times","map","v","cls","key","reverse","current_lap","onTouchEnd","React","Component","ReactDOM","render","document","getElementById"],"mappings":"iPAoBMA,G,MAAiB,SAACC,GACtB,IAMMC,EAAOC,KAAKC,MAAMH,EAFT,OAGTI,EAAQF,KAAKC,MAAOH,EAHX,MADC,MAKVK,EAAUH,KAAKC,MAAOH,EALZ,KADE,KAM2CM,GACvDC,GAAYP,EAPA,IADA,KAQmCQ,QAAQ,GAEzDC,EAAM,UAAMJ,GAAW,EAAjB,aAAuBE,EAAvB,KAIV,OAHAE,EAASL,EAAQ,UAAGA,EAAH,MAAeK,EAASA,EACzCA,EAASR,EAAO,UAAGA,EAAH,MAAcQ,EAASA,IAKnCC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAwBRC,YAAc,WAAO,IACXC,EAAoB,EAAKC,MAAzBD,gBACFE,EAAMC,KAAKD,MAGjB,KAFmBA,EAAMF,EAhEN,KAsEnB,GAAyB,OAArB,EAAKC,MAAMG,MAEb,EAAKC,SAAL,eACK,EAAKJ,MADV,CAEEK,QAAS,GACTF,MAAO,EACPG,UAAWL,EACXF,gBAAiBE,EACjBM,aAAcN,SAEX,CACL,IAAMO,EAAWP,EAAM,EAAKD,MAAMM,UAElC,EAAKF,SAAL,eACK,EAAKJ,MADV,CAEEK,QAAS,EAAKL,MAAMK,QAAQI,OAAO,CAACD,IACpCL,MAAO,EAAKH,MAAMG,MAAQ,EAC1BG,UAAWL,EACXF,gBAAiBE,EACjBM,aAAcN,OAnDlB,EAAKD,MAAQ,CACXK,QAAS,KACTC,UAAW,KACXH,MAAO,KACPI,aAAcL,KAAKD,MACnBF,gBAAiBG,KAAKD,OAPP,E,gEAWE,IAAD,OAClBS,KAAKC,WAAaC,aAAY,kBAAM,EAAKC,SAAQ,O,6CAGjDC,cAAcJ,KAAKC,c,6BAInBD,KAAKN,SAAL,eACKM,KAAKV,MADV,CAEEO,aAAcL,KAAKD,W,+BAqCb,IAAD,OACP,GAAyB,OAArBS,KAAKV,MAAMG,MACb,OACE,yBAAKY,QAASL,KAAKZ,aACjB,yBAAKkB,UAAU,eAAe,OAKpC,IAAMX,EAAUK,KAAKV,MAAMK,QACrBY,EAtGO,SAACC,GAGhB,IAFA,IAAIC,EAAYC,OAAOC,iBACnBC,GAAa,EACRC,EAAI,EAAGA,EAAIL,EAAIM,OAAQD,IAC1BL,EAAIK,IAAMJ,IACZA,EAAYD,EAAIK,GAChBD,EAAYC,GAKhB,OADAE,QAAQC,IAAI,eAAgBJ,EAAWH,GAChCG,EA2FeK,CAAStB,GACvBuB,EAAY,mBAAeX,EAAc,EAA7B,cAAoChC,EACpDoB,EAAQY,KAEJY,EACJZ,GAAe,EACb,yBAAKD,UAAU,iBAAiBY,GAC9B,KAEAE,EAAQzB,EACX0B,KAAI,SAACC,EAAGT,GACP,IAAMU,EAAMV,IAAMN,EAAc,gBAAkB,aAElD,OACE,yBAAKD,UAAWiB,EAAKC,IAAKX,GACvBA,EAAI,EADP,MACatC,EAAe+C,OAI/BG,UA7BI,EA+BmCzB,KAAKV,MAAvCO,EA/BD,EA+BCA,aAAcR,EA/Bf,EA+BeA,gBAChBqC,EACJ,yBAAKpB,UAAU,cAAf,YACY/B,EAAesB,EAAeR,IAI5C,OACE,yBACEgB,QAAS,kBAAM,EAAKjB,eACpBuC,WAAY,kBAAM,EAAKvC,gBAEvB,yBAAKkB,UAAU,eAAeN,KAAKV,MAAMG,OAAS,MACjD0B,EACAO,EACAN,O,GAzGSQ,IAAMC,WAiHxBC,IAASC,OAAO,kBAAC7C,EAAD,MAAS8C,SAASC,eAAe,W","file":"static/js/main.c8dca51a.chunk.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\n\nconst click_time_tol = 100;\n\nconst minIndex = (arr) => {\n  let min_value = Number.MAX_SAFE_INTEGER;\n  let min_index = -1;\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i] <= min_value) {\n      min_value = arr[i];\n      min_index = i;\n    }\n  }\n\n  console.log(\"minIndex => \", min_index, min_value);\n  return min_index;\n};\n\nconst millisToString = (duration) => {\n  const millis_t = 1;\n  const seconds_t = 1000 * millis_t;\n  const minutes_t = 60 * seconds_t;\n  const hours_t = 60 * minutes_t;\n  const days_t = 24 * hours_t;\n\n  const days = Math.floor(duration / days_t);\n  const hours = Math.floor((duration % days_t) / hours_t);\n  const minutes = Math.floor((duration % hours_t) / minutes_t).to;\n  const seconds = ((duration % minutes_t) / seconds_t).toFixed(3);\n\n  let result = `${minutes || 0}m ${seconds}s`;\n  result = hours ? `${hours}h ` + result : result;\n  result = days ? `${days}d ` + result : result;\n\n  return result;\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: null,\n      prev_time: null,\n      count: null,\n      current_time: Date.now(),\n      prev_event_time: Date.now(),\n    };\n  }\n\n  componentDidMount() {\n    this.intervalID = setInterval(() => this.tick(), 100);\n  }\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  tick() {\n    this.setState({\n      ...this.state,\n      current_time: Date.now(),\n    });\n  }\n\n  handleClick = () => {\n    const { prev_event_time } = this.state;\n    const now = Date.now();\n    const delta_time = now - prev_event_time;\n\n    if (delta_time < click_time_tol) {\n      return; // debounce double events like onTouchUp and onClick\n    }\n\n    if (this.state.count === null) {\n      // first click\n      this.setState({\n        ...this.state,\n        history: [],\n        count: 1,\n        prev_time: now,\n        prev_event_time: now,\n        current_time: now,\n      });\n    } else {\n      const new_time = now - this.state.prev_time;\n\n      this.setState({\n        ...this.state,\n        history: this.state.history.concat([new_time]), //[...history, squares],\n        count: this.state.count + 1,\n        prev_time: now,\n        prev_event_time: now,\n        current_time: now,\n      });\n    }\n  };\n\n  render() {\n    if (this.state.count === null) {\n      return (\n        <div onClick={this.handleClick}>\n          <div className=\"count-block\">{\"GO\"}</div>\n        </div>\n      );\n    }\n\n    const history = this.state.history;\n    const fastest_lap = minIndex(history);\n    const fastest_text = `FASTEST: ${fastest_lap + 1} - ${millisToString(\n      history[fastest_lap]\n    )}`;\n    const fastest =\n      fastest_lap >= 0 ? (\n        <div className=\"fastest-block\">{fastest_text}</div>\n      ) : null;\n\n    const times = history\n      .map((v, i) => {\n        const cls = i === fastest_lap ? \"fastest-block\" : \"time-block\";\n\n        return (\n          <div className={cls} key={i}>\n            {i + 1} - {millisToString(v)}\n          </div>\n        );\n      })\n      .reverse();\n\n    const { current_time, prev_event_time } = this.state;\n    const current_lap = (\n      <div className=\"time-block\">\n        CURRENT: {millisToString(current_time - prev_event_time)}\n      </div>\n    );\n\n    return (\n      <div\n        onClick={() => this.handleClick()}\n        onTouchEnd={() => this.handleClick()}\n      >\n        <div className=\"count-block\">{this.state.count || \"GO\"}</div>\n        {fastest}\n        {current_lap}\n        {times}\n      </div>\n    );\n  }\n}\n\n// ========================================\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}